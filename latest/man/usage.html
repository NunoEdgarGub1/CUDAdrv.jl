<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Usage · CUDAdrv.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/highlightjs/default.css" rel="stylesheet" type="text/css"/><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>CUDAdrv.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" action="../search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../index.html">Home</a></li><li><span class="toctext">Manual</span><ul><li class="current"><a class="toctext" href="usage.html">Usage</a><ul class="internal"><li><a class="toctext" href="#Automatic-memory-management-1">Automatic memory management</a></li><li><a class="toctext" href="#Troubleshooting-1">Troubleshooting</a></li></ul></li></ul></li><li><span class="toctext">Library</span><ul><li><a class="toctext" href="../lib/api.html">API wrappers</a></li><li><a class="toctext" href="../lib/array.html">Arrays</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Manual</li><li><a href="usage.html">Usage</a></li></ul><a class="edit-page" href="https://github.com/JuliaGPU/CUDAdrv.jl/tree/0ba2fa471dbc065e03c069bd7e2a7239f204f2a4/docs/src/man/usage.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Usage</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Usage-1" href="#Usage-1">Usage</a></h1><p>Quick start:</p><pre><code class="language-julia">dev = CuDevice(0);
ctx = CuContext(dev);

destroy!(ctx)

# output
</code></pre><h2><a class="nav-anchor" id="Automatic-memory-management-1" href="#Automatic-memory-management-1">Automatic memory management</a></h2><p>Except for the encapsulating context, <code>destroy</code> or <code>unload</code> calls are never needed. Objects are registered with the Julia garbage collector, and are automatically finalized when they go out of scope.</p><p>However, many CUDA API functions implicitly depend on global state, such as the current active context. The wrapper needs to model those dependencies in order for objects not to get destroyed before any dependent object is. If we fail to model these dependency relations, API calls might randomly fail, eg. in the case of a missing context dependency with a <code>INVALID_CONTEXT</code> or <code>CONTEXT_IS_DESTROYED</code> error message.</p><p>If this seems to be the case, re-run with <code>TRACE=1</code> and file a bug report.</p><h2><a class="nav-anchor" id="Troubleshooting-1" href="#Troubleshooting-1">Troubleshooting</a></h2><p>You can enable verbose logging using two environment variables:</p><ul><li><p><code>DEBUG</code>: if set, enable additional (possibly costly) run-time checks, and some more verbose output</p></li><li><p><code>TRACE</code>: if set, the <code>DEBUG</code> level will be activated, in addition with a trace of every call to the underlying library</p></li></ul><p>In order to avoid run-time cost for checking the log level, these flags are implemented by means of global constants. As a result, you <strong>need to run Julia with precompilation disabled</strong> if you want to modify these flags:</p><pre><code class="language-none">$ TRACE=1 julia --compilecache=no examples/vadd.jl
TRACE: CUDAdrv.jl is running in trace mode, this will generate a lot of additional output
...</code></pre><p>Enabling colors with <code>--color=yes</code> is also recommended as it color-codes the output.</p><footer><hr/><a class="previous" href="../index.html"><span class="direction">Previous</span><span class="title">Home</span></a><a class="next" href="../lib/api.html"><span class="direction">Next</span><span class="title">API wrappers</span></a></footer></article></body></html>
